# llm_ea_tests Directory

This directory contains scripts and modules for merging, repairing, and managing test suites generated by both Large Language Models (LLM) and Evolutionary Algorithms (EA, e.g., Pynguin). It enables the creation of comprehensive, deduplicated, and robust test suites by leveraging the strengths of both approaches and automating the repair of failing tests.

---

## Module Overview

### 1. `run_merger.py`
**Functionality:**
- Orchestrates the end-to-end merging process for LLM and EA-generated test suites.
- Locates relevant test files, builds detailed prompts for the LLM, and manages file uploads or direct code embedding.
- Runs the merged suite with pytest, and if failures occur, initiates an automated repair loop using LLM assistance.
- Backs up original files and ensures the final suite is readable, comprehensive, and passes all tests.

**Key Details:**
- Supports iterative repair with configurable maximum attempts.
- Handles error reporting and manages output files for traceability.

---

### 2. `test_merger.py`
**Functionality:**
- Implements the logic for comparing, deduplicating, and merging test cases from LLM and EA sources.
- Uses LLM to intelligently add missing edge cases from the EA suite to the LLM suite, while avoiding redundant or duplicate tests.
- Maintains suite readability, structure, and compatibility with pytest.

**Key Details:**
- Leverages LLM for semantic analysis and code synthesis.
- Ensures merged tests are meaningful and non-redundant.
- Handles persistent failures by marking tests with `@pytest.mark.xfail` if they cannot be repaired.

---

## Key Workflow
1. **Locate and verify test files** for both LLM and EA-generated suites.
2. **Create a merge prompt** and send both suites to the LLM for intelligent merging.
3. **LLM analyzes and merges** the suites, adding valuable edge cases and deduplicating tests.
4. **Save the merged suite** and back up originals for safety.
5. **Run and verify the merged suite** with pytest, repairing failures via LLM if needed.
6. **Finalize the suite** for integration into the main test pipeline.

---

## Important Notes
- The merging process combines human-like intuition (LLM) and deep automated exploration (EA) for maximum coverage and quality.
- Automated repair ensures the final suite is robust and executable.
- Deduplication and semantic analysis maintain suite maintainability and readability.
- The directory is designed for extensibility and integration with other pipeline components.

---

## Usage
- Use `run_merger.py` to orchestrate the merging and repair process.
- Use `test_merger.py` to perform intelligent merging and deduplication of test suites.
- Integrate with normalization, population management, and analysis modules for a complete workflow.

---

For further details, refer to the docstrings and comments within each module and script.
